[toc]
# Activity的生命周期
## 先说两句
为什么还要记这个东西，你可能会觉得，生命不就是几个回调嘛？嗯确实，但是对于细节上的东西，我也没有多认真了解过。
## onCreate
这个方法就很常用了，就是初始化资源，这个方法上在生命周期中只被调一次，有趣的是，如果Ativity被系统内存不足而回收了，这个方法中可以拿到上一次的数据。这个相信你还记得。
## onRestart
这个方法一般我们不常在里面处理东西，但是这个方法是什么时候会被调用？如果Activity经历了onStop方法，这个方法就可能会被执行这个方法没有配对方法，他是比较特殊的一个方法，一般不会用到。
## onStart
代表活动正在被启动，这个时候活动其实已经可见了，但是还无法和我们交互，就是没有出现在前台，上面这句话可能比较难理解，意思就是，活动已经显示出来了，但是我们看不到，我们看的到叫显示在前台。这个方法就比较常用，可以在这个方法进行一些开关操作，比如你有一个计时器，这个活动显示你才计时，那可以在这个方法中开始计时。
## onResume
这个方法的意思就是活动已经可以被我们见到，已经可以和我们交互了，这个方法中也可以做上面那个方法的事情，而且一般也是在这个方法做
## onPause
这个方法就是表示活动在被停止，这个方法很重要，后面会讲怎么重要，你可以在这个方法做一些存储数据，停止动画的操作，但是不允许太耗时，因为旧的活动的onPause必须执行完，新的活动才会执行onResume方法。
## onStop
这个方法和onStart方法对应，这个方法就是代表活动即将停止，可以在这里做一些比较重量级的回收操作，但是还是不能过于耗时
## onDestroy
这个方法就经常用了，这个方法一旦被调用，说明他是真的被销毁了，你可以在这里做最终的资源释放和回收工作
## 比较特别的地方
- 如果，你的软件放在后台，系统回收了你的软件，那活动会走到哪个生命周期？？既然是后台，说明已经走到了onStop方法，但是onDestroy是不会被调用的
- 还有一种特别的情况，如果你的activity用了透明主题，当打开新的活动，或者回到桌面的时候，就不会调用onStop方法，这里的原因是什么？我现在也不知道，我觉得应该是和绘制有关。

## onStart和onResume方法有什么异同
onStart是什么？是让活动显示出来，但是是不可以交互，是位于后台，所以我们可以理解，这个方法让活动位于后台，那么onResume就是让活动位于前台，是的，就是这个意思
## onPause和onResume方法比较特别的一个地方
为什么前面说，只有旧的Activity调用了onPause方法，新的活动的onResume才会被调用？这就要分析是谁在调活动的各种生命周期的方法了，我们以前刚刚学习的时候就一直在说：系统会自动回调什么什么方法，其实是ActivityManagerService（简称ams）在调用那些回调方法，从名字就能看出这是个安卓系统负责管理活动的服务
### 简单的启动流程
你发起请求打开活动，这个请求会被Instrumentation处理（暂时不用管这个是啥），它会通过Binder机制去向AMS发起请求，AMS内部有一个ActivityStack，这个就是真正去处理活动各种状态回调的类了，意思就是说，真正去掉起活动的生命周期，就是这个东东。那么我们就能从里面找出，为什么一定要旧活动调用onPause方法后，新的活动才去调用onResume方法。
### 分析源码
书上有，在p5，懒得打，源码是先把旧的Activity去Pause掉，然后才去调新的Activity的OnResume方法，是不是废话？代码也是那样写的，，，我就是懒得打，怎么样！
